{% extends "landing-page.html" %}
{% load static %}


{% block body_content %}

<div class="wrapper">
  <div class="page-header">
    <div class="page-header-image"></div>
    <div class="content">
      <div class="container">
        <div class="row">
          <div class="col-md-6 offset-md-3">
            <div id="square7" class="square square-7"></div>
            <div id="square8" class="square square-8"></div>
            <div class="card card-register">
              <div class="card-header">
                <img class="card-img" src="{% static "/img/square1.png" %}" alt="Card image"  style="width: 100%; height: 180px">
                <h4 class="card-title" style="text-transform: capitalize;  margin-left: 20px">Register</h4>
              </div>
              <div class="card-body">
                <form class="form">
                  <div class="input-group m-0">
                    <div class="input-group-prepend">
                      <div class="input-group-text">
                        <i class="tim-icons icon-single-02"></i>
                      </div>
                    </div>
                    <input type="text" class="form-control" id="first_name" placeholder="Full Name">
                  </div>
                  <div id="first_name_val" class="text-danger m-2 mt-0"></div>
                  <div class="input-group">
                    <div class="input-group-prepend">
                      <div class="input-group-text">
                        <i class="tim-icons icon-email-85"></i>
                      </div>
                    </div>
                    <input type="text" placeholder="Email" id="email" class="form-control">
                  </div>
                  <div id="email_val" class="text-danger m-2 mt-0"></div>

                  <div class="input-group">
                    <div class="input-group-prepend">
                      <div class="input-group-text">
                        <i class="tim-icons icon-lock-circle"></i>
                      </div>
                    </div>
                    <input type="text" class="form-control" id="password" placeholder="Password">
                  </div>
                  <div id="password_val" class="text-danger m-2 mt-0"></div>

                  <div class="form-check text-left">
                    <label class="form-check-label">
                      <input class="form-check-input" type="checkbox">
                      <span class="form-check-sign"></span>
                      I agree to the
                      <a href="javascript:void(0)">terms and conditions</a>.
                    </label>
                  </div>
                </form>
              </div>
              <div class="card-footer">
                <a onclick="registerUser()" class="btn btn-info btn-round btn-lg">Get Started</a>
              </div>
            </div>
          </div>
        </div>
        <div class="register-bg"></div>
        <div id="square1" class="square square-1"></div>
        <div id="square2" class="square square-2"></div>
        <div id="square3" class="square square-3"></div>
        <div id="square4" class="square square-4"></div>
        <div id="square5" class="square square-5"></div>
        <div id="square6" class="square square-6"></div>
      </div>
    </div>
  </div>
</div>

<script>
  function registerUser () {
    
    var first_name = $("#first_name").val()
    var email = $("#email").val()
    var password = $("#password").val()
    var bool = true
    if (first_name == "") {
      bool = false
      $("#first_name_val").html("Please enter your first name") 
    } else {
      $("#first_name_val").html("") 
    }

    if (email == "") {
      bool = false
      $("#email_val").html("Please enter your email ID") 
    } else {
      $("#email_val").html("") 
    }

    if (password == "") {
      bool = false
      $("#password_val").html("Please enter a password") 
    } else {
      $("#password_val").html("")
    }

    if (bool) {
      const form_data = new FormData()

      form_data.append("username", first_name)
      form_data.append("email", email)
      form_data.append("password", password)
      $.ajax({
        url: "{% url 'user-registration' %}",
        method: "POST",
        processData: false,
        contentType: false,
        data: form_data
      })
      .then((resp) => {
        console.log(resp)
      })
      .catch((error) => {
        console.log(error)
      })
    }
    
  }
</script>
{% endblock %}